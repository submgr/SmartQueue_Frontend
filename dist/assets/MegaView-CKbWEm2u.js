import{d as w,I as E,a as q,b as B,c as b,e as v,f as D,g as F,h as A,i as $,j as V,l as x,k as z,_ as N,r as l,o as c,p as T,w as n,q as s,s as m,t as i,v as t,u as _,x as j,F as M,y as O,B as d,z as P,A as W}from"./index-ZBg8beDz.js";const H=w({components:{IonButtons:E,IonSelect:q,IonSelectOption:B,IonContent:b,IonHeader:v,IonMenuButton:D,IonPage:F,IonTitle:A,IonToolbar:$,IonItem:V,IonButton:x,IonCol:z},data(){return{isFullscreen:!1,workerBinding:{1:"333",2:"3332",3:"3333",4:"3334",5:"3335",6:"3336"},queueData:[]}},mounted(){setInterval(()=>{this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/get",{params:{id:this.workspaceSetting_WorkerID}}).then(e=>{console.log(e.data.data);var r=[];Object.entries(e.data.data).forEach(([a,o])=>{const p={id:parseInt(a)+1,worker:parseInt(o.assignedWorker),room:"",status:o.serviceState};(o.serviceState=="Calling"||o.serviceState=="Queued")&&r.push(p)}),r.sort((a,o)=>a.status==="Calling"&&o.status==="Calling"?a.id-o.id:a.status==="Calling"?-1:o.status==="Calling"?1:a.id-o.id),console.log(r),this.queueData=r}).catch(e=>{console.error(e)})},2500),setInterval(()=>{this.check()},3e3)},methods:{check(){!window.screenTop&&!window.screenY?this.isFullscreen&&(document.querySelectorAll("ion-menu").forEach(function(e){e.style.display="flex"}),document.querySelectorAll("ion-toolbar").forEach(function(e){e.style.display="block"})):this.isFullscreen||(document.querySelectorAll("ion-menu").forEach(function(e){e.style.display="none"}),document.querySelectorAll("ion-toolbar").forEach(function(e){e.style.display="none"}))}}}),h=e=>(P("data-v-ada92f73"),e=e(),W(),e),L={class:"data"},Q=h(()=>t("tr",null,[t("th",null,"Посетитель"),t("th",null,"Оператор"),t("th",null,"Аудитория")],-1)),Y={key:0,id:"container"},G=h(()=>t("strong",{class:"capitalize"},"Очередь пуста",-1)),J=h(()=>t("p",null,"Сейчас в очереди никого нет",-1)),K=[G,J];function R(e,r,a,o,p,U){const I=l("ion-menu-button"),C=l("ion-buttons"),g=l("ion-title"),f=l("ion-toolbar"),y=l("ion-header"),k=l("ion-content"),S=l("ion-page");return c(),T(S,null,{default:n(()=>[s(f,null,{default:n(()=>[s(C,{slot:"start"},{default:n(()=>[s(I,{color:"primary"})]),_:1}),s(g,null,{default:n(()=>[m(i(e.$route.params.id),1)]),_:1})]),_:1}),s(k,{fullscreen:!0},{default:n(()=>[s(y,{collapse:"condense"},{default:n(()=>[s(f,null,{default:n(()=>[s(g,{size:"large"},{default:n(()=>[m(i(e.$route.params.id),1)]),_:1})]),_:1})]),_:1}),t("div",null,[t("table",L,[Q,(c(!0),_(M,null,j(e.queueData,u=>(c(),_("tr",{class:d({highlighted:u.status==="Calling"}),style:{"text-align":"center"}},[t("td",{class:d({highlighted:u.status==="Calling"})},i(u.id),3),t("td",{class:d({highlighted:u.status==="Calling"})},i(u.worker),3),t("td",{class:d({highlighted:u.status==="Calling"})},i(e.workerBinding[u.worker]),3)],2))),256))])]),e.queueData.length<1?(c(),_("div",Y,K)):O("",!0)]),_:1})]),_:1})}const Z=N(H,[["render",R],["__scopeId","data-v-ada92f73"]]);export{Z as default};
