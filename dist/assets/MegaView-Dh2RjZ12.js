import{d as S,I as E,a as q,b,c as v,e as D,f as B,g as F,h as A,i as $,_ as V,r as l,o as c,j as N,w as n,k as s,l as m,t as i,n as t,m as _,p as T,F as x,q as z,v as d,s as j,u as M}from"./index-yANS5MSY.js";const O=S({components:{IonButtons:E,IonSelect:q,IonSelectOption:b,IonContent:v,IonHeader:D,IonMenuButton:B,IonPage:F,IonTitle:A,IonToolbar:$},data(){return{isFullscreen:!1,workerBinding:{1:"333",2:"3332",3:"3333",4:"3334",5:"3335",6:"3336"},queueData:[{id:1,worker:5,room:"365A"}]}},mounted(){setInterval(()=>{this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/get",{params:{id:this.workspaceSetting_WorkerID}}).then(e=>{console.log(e.data.data);var r=[];Object.entries(e.data.data).forEach(([a,o])=>{const p={id:parseInt(a)+1,worker:parseInt(o.assignedWorker),room:"",status:o.serviceState};(o.serviceState=="Calling"||o.serviceState=="Queued")&&r.push(p)}),r.sort((a,o)=>a.status==="Calling"&&o.status==="Calling"?a.id-o.id:a.status==="Calling"?-1:o.status==="Calling"?1:a.id-o.id),console.log(r),this.queueData=r}).catch(e=>{console.error(e)})},2500),setInterval(()=>{this.check()},3e3)},methods:{check(){!window.screenTop&&!window.screenY?this.isFullscreen&&(document.querySelectorAll("ion-menu").forEach(function(e){e.style.display="flex"}),document.querySelectorAll("ion-toolbar").forEach(function(e){e.style.display="block"})):this.isFullscreen||(document.querySelectorAll("ion-menu").forEach(function(e){e.style.display="none"}),document.querySelectorAll("ion-toolbar").forEach(function(e){e.style.display="none"}))}}}),h=e=>(j("data-v-aa8c6fc1"),e=e(),M(),e),P={class:"data"},W=h(()=>t("tr",null,[t("th",null,"Посетитель"),t("th",null,"Оператор"),t("th",null,"Аудитория")],-1)),H={key:0,id:"container"},L=h(()=>t("strong",{class:"capitalize"},"Очередь пуста",-1)),Q=h(()=>t("p",null,"Сейчас в очереди никого нет",-1)),Y=[L,Q];function G(e,r,a,o,p,J){const I=l("ion-menu-button"),k=l("ion-buttons"),g=l("ion-title"),f=l("ion-toolbar"),C=l("ion-header"),w=l("ion-content"),y=l("ion-page");return c(),N(y,null,{default:n(()=>[s(f,null,{default:n(()=>[s(k,{slot:"start"},{default:n(()=>[s(I,{color:"primary"})]),_:1}),s(g,null,{default:n(()=>[m(i(e.$route.params.id),1)]),_:1})]),_:1}),s(w,{fullscreen:!0},{default:n(()=>[s(C,{collapse:"condense"},{default:n(()=>[s(f,null,{default:n(()=>[s(g,{size:"large"},{default:n(()=>[m(i(e.$route.params.id),1)]),_:1})]),_:1})]),_:1}),t("div",null,[t("table",P,[W,(c(!0),_(x,null,T(e.queueData,u=>(c(),_("tr",{class:d({highlighted:u.status==="Calling"}),style:{"text-align":"center"}},[t("td",{class:d({highlighted:u.status==="Calling"})},i(u.id),3),t("td",{class:d({highlighted:u.status==="Calling"})},i(u.worker),3),t("td",{class:d({highlighted:u.status==="Calling"})},i(e.workerBinding[u.worker]),3)],2))),256))])]),e.queueData.length<1?(c(),_("div",H,Y)):z("",!0)]),_:1})]),_:1})}const R=V(O,[["render",G],["__scopeId","data-v-aa8c6fc1"]]);export{R as default};
