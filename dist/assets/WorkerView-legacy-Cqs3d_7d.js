System.register(["./index-legacy-BJbWUUKI.js"],(function(e,t){"use strict";var a,r,o,s,n,i,l,c,u,d,p,g,k,I,h,m,w,f,_,S,v,y,x,W,b,D,C,z,A,V;return{setters:[e=>{a=e.d,r=e.I,o=e.a,s=e.b,n=e.c,i=e.e,l=e.f,c=e.g,u=e.h,d=e.i,p=e.j,g=e.k,k=e.l,I=e.m,h=e.n,m=e._,w=e.r,f=e.o,_=e.p,S=e.w,v=e.q,y=e.s,x=e.t,W=e.u,b=e.v,D=e.F,C=e.x,z=e.y,A=e.z,V=e.A}],execute:function(){var t=document.createElement("style");t.textContent=".container[data-v-660e0809]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}.container strong[data-v-660e0809]{font-size:20px;line-height:26px}.container p[data-v-660e0809]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}.container a[data-v-660e0809]{text-decoration:none}\n",document.head.appendChild(t);const P=a({components:{IonButtons:r,IonSelect:o,IonSelectOption:s,IonContent:n,IonHeader:i,IonMenuButton:l,IonPage:c,IonTitle:u,IonToolbar:d,IonItem:p,IonCol:g,IonButton:k,IonRow:I,IonGrid:h},data:()=>({stage:"workspaceSelection",workplaceIdInput:-1,currentVisitor:-1}),mounted(){localStorage.getItem("workspaceSetting_WorkerID")&&Number(localStorage.getItem("workspaceSetting_WorkerID"))>-1&&(this.stage="workspaceDesk",this.workspaceSetting_WorkerID=Number(localStorage.getItem("workspaceSetting_WorkerID")))},methods:{selectWorkplace(){if(Number(this.workplaceIdInput)>-1){var e=Number(this.workplaceIdInput);this.workspaceSetting_WorkerID=e,this.stage="workspaceDesk",localStorage.setItem("workspaceSetting_WorkerID",e+"")}else console.log("Please, select correct value for the workplace's ID.",Number(this.workplaceIdInput))},resetWorkspace(){localStorage.removeItem("workspaceSetting_WorkerID"),this.stage="workspaceSelection"},workplaceSelectorNewValue(e){this.workspaceSetting_WorkerID=Number(e.detail.value)},catchNewRequest(){this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/catch",{params:{id:this.workspaceSetting_WorkerID,workerId:this.workspaceSetting_WorkerID}}).then((e=>{if("AddedToFreeWorkers"==e.data.status){this.stage="workspaceIsFreeOfWork";const e=setInterval((()=>{this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/catch",{params:{id:this.workspaceSetting_WorkerID,workerId:this.workspaceSetting_WorkerID}}).then((t=>{"Assigned"==t.data.status&&(clearInterval(e),this.currentVisitor=t.data.key,this.stage="awaitingForVisitor")})).catch((e=>{console.error(e)}))}),4e3)}else"Assigned"==e.data.status&&(this.currentVisitor=e.data.key,this.stage="awaitingForVisitor")})).catch((e=>{console.error(e)}))},acceptArbitrary(){this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/acceptArbitrary",{params:{id:this.workspaceSetting_WorkerID}}).then((e=>{"InProgress"==e.data.status&&(this.currentVisitor=e.data.visitorId,this.stage="InProgress")})).catch((e=>{console.error(e)}))},updateStatus(e){this.$axios.get(localStorage.getItem("APIServer_InstanceAddress")+"/queue/updateStatus",{params:{id:this.currentVisitor,newStatus:e}}).then((t=>{"Updated"==t.data.status&&(this.stage="InProgress","Finished"==e&&(this.stage="workspaceDesk"),"CanceledByWorker"==e&&(this.stage="workspaceDesk"))})).catch((e=>{console.error(e)}))}}}),N=e=>(A("data-v-660e0809"),e=e(),V(),e),F={key:0,class:"container"},q={style:{width:"50%","max-width":"90vw",margin:"auto"}},$=N((()=>b("strong",{class:"capitalize"},"Выбор оператора",-1))),B=N((()=>b("p",null,"Выберите оператора, за которого вы работаете",-1))),O={key:1,style:{"margin-left":"5vw"}},R={style:{background:"#00000010","border-radius":"20px",height:"auto",padding:"10px",width:"180px","margin-left":"5px","margin-bottom":"10vh"}},T={class:"capitalize",style:{"padding-bottom":"15px"}},j=N((()=>b("strong",{class:"capitalize"},"Следующий посетитель",-1))),U=N((()=>b("p",null,"Уже готовы к следующему посетителю?",-1))),E=N((()=>b("strong",{class:"capitalize"},"Принять вне очереди",-1))),G=N((()=>b("p",null,"Принимаете посетителя вне очереди?",-1))),H={key:2,class:"container"},M=[N((()=>b("strong",{class:"capitalize"},"Ждем!",-1))),N((()=>b("p",null,"Сейчас нет посетителей, которых можно бы было взять",-1))),N((()=>b("p",null,"Когда появятся посетители - они будут распределены вам.",-1)))],Y={key:3,class:"container"},J={class:"capitalize"},K=N((()=>b("p",null,"Посетитель вызван к вам",-1))),L={key:4,class:"container"},Q={class:"capitalize"},X=N((()=>b("p",null,"Вы работаете с этим посетителем сейчас",-1)));e("default",m(P,[["render",function(e,t,a,r,o,s){const n=w("ion-menu-button"),i=w("ion-buttons"),l=w("ion-title"),c=w("ion-toolbar"),u=w("ion-header"),d=w("ion-select-option"),p=w("ion-select"),g=w("ion-item"),k=w("ion-button"),I=w("ion-col"),h=w("ion-row"),m=w("ion-grid"),A=w("ion-content"),V=w("ion-page");return f(),_(V,null,{default:S((()=>[v(u,{translucent:!0},{default:S((()=>[v(c,null,{default:S((()=>[v(i,{slot:"start"},{default:S((()=>[v(n,{color:"primary"})])),_:1}),v(l,null,{default:S((()=>[y(x(e.$route.params.id),1)])),_:1})])),_:1})])),_:1}),v(A,{fullscreen:!0},{default:S((()=>[v(u,{collapse:"condense"},{default:S((()=>[v(c,null,{default:S((()=>[v(l,{size:"large"},{default:S((()=>[y(x(e.$route.params.id),1)])),_:1})])),_:1})])),_:1}),"workspaceSelection"==e.stage?(f(),W("div",F,[b("div",q,[$,B,v(g,{style:{"margin-top":"5vh"}},{default:S((()=>[v(p,{label:"Оператор",placeholder:"Выберите",modelValue:e.workplaceIdInput,"onUpdate:modelValue":t[0]||(t[0]=t=>e.workplaceIdInput=t),onIonChange:e.workplaceSelectorNewValue},{default:S((()=>[(f(),W(D,null,C(100,(e=>v(d,{key:e,value:e},{default:S((()=>[y(x(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","onIonChange"])])),_:1}),v(k,{style:{"margin-top":"5vh"},onClick:e.selectWorkplace},{default:S((()=>[y("Продолжить")])),_:1},8,["onClick"])])])):z("",!0),"workspaceDesk"==e.stage?(f(),W("div",O,[b("div",R,[b("strong",T,"Рабочее место "+x(e.workspaceSetting_WorkerID),1)]),v(m,null,{default:S((()=>[v(h,null,{default:S((()=>[v(I,{size:"6"},{default:S((()=>[j,U,v(k,{onClick:e.catchNewRequest,style:{"margin-top":"2vh","margin-left":"-4px"}},{default:S((()=>[y("Позвать следующего посетителя")])),_:1},8,["onClick"])])),_:1}),v(I,{size:"6"},{default:S((()=>[E,G,v(k,{onClick:e.acceptArbitrary,style:{"margin-top":"2vh","margin-left":"-4px"}},{default:S((()=>[y("Принять вне очереди")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])):z("",!0),"workspaceIsFreeOfWork"==e.stage?(f(),W("div",H,M)):z("",!0),"awaitingForVisitor"==e.stage?(f(),W("div",Y,[b("strong",J,"В пути посетитель №"+x(e.currentVisitor),1),K,v(m,{style:{"margin-top":"5vh",width:"65vw"}},{default:S((()=>[v(h,null,{default:S((()=>[v(I,{size:"6"},{default:S((()=>[v(k,{onClick:t[1]||(t[1]=t=>e.updateStatus("CanceledByWorker")),style:{"margin-left":"-4px",opacity:"0.8"},color:"danger"},{default:S((()=>[y("Не пришел, отменить")])),_:1})])),_:1}),v(I,{size:"6"},{default:S((()=>[v(k,{onClick:t[2]||(t[2]=t=>e.updateStatus("InProgress")),style:{"margin-left":"-4px"}},{default:S((()=>[y("Пришел, начать работу")])),_:1})])),_:1})])),_:1})])),_:1})])):z("",!0),"InProgress"==e.stage?(f(),W("div",L,[b("strong",Q,"Ваш посетитель №"+x(e.currentVisitor),1),X,v(k,{onClick:t[3]||(t[3]=t=>e.updateStatus("Finished")),style:{"margin-top":"5vh","margin-left":"-4px"}},{default:S((()=>[y("Мы закончили, завершить")])),_:1})])):z("",!0)])),_:1})])),_:1})}],["__scopeId","data-v-660e0809"]]))}}}));
